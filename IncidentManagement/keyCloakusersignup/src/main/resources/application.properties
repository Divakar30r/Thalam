server.port=${SERVER_PORT:8091}

###############################################
# Keycloak / Spring Security Configuration
# This application is a pure OAuth2 Resource Server secured by
# Bearer JWT tokens issued by Keycloak. We rely ONLY on standard
# Spring Boot properties (no legacy keycloak.* adapter settings).
###############################################
spring.security.oauth2.resourceserver.jwt.issuer-uri=${KEYCLOAK_ISSUER_URI:http://localhost:9090/realms/TeamMgmt}
############################################### Client Registration - to add Client specific rol
# Optional: keep a client registration ONLY if you need to initiate outbound
# OAuth2 flows (e.g. interactive login) from this service. Remove if not needed.
spring.security.oauth2.client.registration.keycloak.client-id=${KEYCLOAK_CLIENT_ID:INCMGMT}
spring.security.oauth2.client.registration.keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET:hJxxvsZ0oI5roeJO1FlCXJzz5jWtXzmz}
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=${KEYCLOAK_LOGIN_GRANT_TYPE:client_credentials}
spring.security.oauth2.client.provider.keycloak.issuer-uri=${KEYCLOAK_ISSUER_URI:http://localhost:9090/realms/TeamMgmt}
########## Default Role Assignment ##########
registration.client.default-roles=${REGISTRATION_CLIENT_DEFAULT_ROLES:INCCHK,RSPCHK}


########## Keycloak Admin Access (for user provisioning) ##########
# Service-account / client-credentials based administrative client.
 
provision.admin.client-id=${PROVISION_ADMIN_CLIENT_ID:DivRealmAdministrator}
provision.admin.client-secret=${PROVISION_ADMIN_CLIENT_SECRET:GPH37R4Baw9auSzk8cyCBiPcraPET0Bp}
provision.admin.grant-type=${PROVISION_ADMIN_GRANT_TYPE:client_credentials}
# Realm in which the admin client resides (often 'master' OR the managed realm itself)
provision.admin.realm=${PROVISION_ADMIN_REALM:TeamMgmt}
provision.fail-if-exists=${PROVISION_FAIL_IF_EXISTS:false}
provision.email-verified=${PROVISION_EMAIL_VERIFIED:true}
provision.user-enabled=${PROVISION_USER_ENABLED:true}
provision.fail-if-group-exists=${PROVISION_FAIL_IF_GROUP_EXISTS:false}
provision.group.name.pattern=${PROVISION_GROUP_NAME_PATTERN:^[A-Za-z0-9._-]{3,64}$}

provision.default.realm-roles=${PROVISION_DEFAULT_REALM_ROLES:DivRealmDftRole}

# BCrypt strength
security.password.encoder.strength=${SECURITY_PASSWORD_ENCODER_STRENGTH:12}

########## Actuator / Management ##########
# Expose only health (and optionally info). Add others via ENV override if needed.
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_EXPOSURE:health}
# Show full health details (status of components) - set to 'never' to hide.
management.endpoint.health.show-details=${MANAGEMENT_HEALTH_SHOW_DETAILS:always}
# Separate management port (uncomment to enable)
# management.server.port=${MANAGEMENT_SERVER_PORT:8092}
# Enable liveness and readiness probes (Spring Boot auto-configures them when actuators present)
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true


